# Basic .htaccess starter
# - Requires Apache with mod_rewrite, mod_headers, mod_expires enabled
# - Ensure the vhost allows .htaccess (AllowOverride All)

# Prevent directory listing
Options -Indexes

# Protect .htaccess and other sensitive files
<Files ".htaccess">
    Require all denied
</Files>
<FilesMatch "\.(env|json|lock|config|sql|md|gitignore)$">
    Require all denied
</FilesMatch>

# Enable URL rewriting
RewriteEngine On
RewriteBase /

# --- Force HTTPS (uncomment if you want) ---
#RewriteCond %{HTTPS} !=on
#RewriteRule ^ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

# --- Force www and HTTPS (replace example.com with your domain; uncomment if you want) ---
#RewriteCond %{HTTP_HOST} !^www\. [NC,OR]
#RewriteCond %{HTTPS} !=on
#RewriteRule ^ https://www.example.com%{REQUEST_URI} [L,R=301]

# Front-controller: send non-file/directory requests to index.php (common for frameworks)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^ index.php [L]

# Caching (optional)
<IfModule mod_expires.c>
    ExpiresActive On
    ExpiresByType text/css "access plus 1 week"
    ExpiresByType application/javascript "access plus 1 week"
    ExpiresByType image/jpeg "access plus 1 month"
    ExpiresDefault "access plus 2 days"
</IfModule>

# Security headers (optional)
<IfModule mod_headers.c>
    Header set X-Content-Type-Options "nosniff"
    Header set X-Frame-Options "SAMEORIGIN"
    Header set X-XSS-Protection "1; mode=block"
</IfModule>